<div class="card">
    <div class="card-body" style="min-height: 46.5vh">
        <h2 class="card-title">Edit Medical Record For Patient {{selectedAppointment?.fullName}}</h2>
        <div class="row form-row">
            <form #reviewForm="ngForm" (ngSubmit)="onUpdate()">
                <mat-dialog-content>
                    <mat-form-field appearance="outline" class="col-sm-5 col-md-3 col-lg-3 col-xl-4"
                        style="margin-right: 20px;">
                        <mat-label>Blood Group</mat-label>
                        <mat-select required [(ngModel)]="editingMedicalRecord.bloodType" name="bloodType">
                            <mat-option value="A">A</mat-option>
                            <mat-option value="B">B</mat-option>
                            <mat-option value="O">O</mat-option>
                            <mat-option value="AB">AB</mat-option>
                        </mat-select>
                    </mat-form-field>
                    <mat-form-field appearance="outline" class="col-sm-5 col-md-3 col-lg-3 col-xl-4">
                        <mat-label>Heart Rate</mat-label>
                        <input matInput placeholder="Ex. 80" name="heartRate"
                            [(ngModel)]="editingMedicalRecord.heartRate" required type="number" />
                    </mat-form-field>
                    <br>
                    <mat-form-field appearance="outline" class="col-sm-5 col-md-3 col-lg-3 col-xl-2"
                        style="margin-right: 77px; width: 18%;">
                        <mat-label>Temperature</mat-label>
                        <input matInput placeholder="Ex: 36.75" name="temperature" [(ngModel)]="editingMedicalRecord.temperature"
                         type="text" pattern="^\d+(\.\d{1,2})?$" />
                    </mat-form-field>
                    <mat-form-field appearance="outline" class="col-sm-5 col-md-3 col-lg-3 col-xl-2"
                        style="margin-right: 77px; width: 18%;">
                        <mat-label>Height</mat-label>
                        <input matInput placeholder="" name="height" [(ngModel)]="editingMedicalRecord.height"
                        type="text" pattern="^\d+(\.\d{1,2})?$" />
                    </mat-form-field>
                    <mat-form-field appearance="outline" class="col-sm-5 col-md-3 col-lg-3 col-xl-2" style="width: 18%;">
                        <mat-label>Weight</mat-label>
                        <input matInput placeholder="" name="weight" [(ngModel)]="editingMedicalRecord.weight"
                        type="text" pattern="^\d+(\.\d{1,2})?$" />
                    </mat-form-field>
                    <br>
                    <mat-form-field appearance="outline" class="col-sm-12 col-md-6 col-lg-6 col-xl-9 pb-1" style="width: 69%;">
                        <mat-label>Description</mat-label>
                        <textarea matInput placeholder="Ex. Symptoms recorded from the patient" name="description"
                            required [(ngModel)]="editingMedicalRecord.description"></textarea>
                    </mat-form-field>
                    <mat-form-field appearance="outline" class="col-sm-12 col-md-6 col-lg-6 col-xl-9 pb-1" style="width: 69%;">
                        <mat-label>Allergies</mat-label>
                        <textarea matInput placeholder="Ex. Symptoms recorded from the patient" name="allergies"
                            required [(ngModel)]="editingMedicalRecord.allergies"></textarea>
                    </mat-form-field>
                    <br>
                    <div class="change-avatar">
                        <div style="display: flex; justify-content: center; max-width: 30%; margin-bottom: 10px;">
                          <p-image *ngIf="editingMedicalRecord.filePath" 
                          [src]="editingMedicalRecord.filePath" alt="File" width="100%"
                            [preview]="true"></p-image>
                          <div *ngIf="fileName" class="file-name">
                            {{ fileName }}
                          </div>
                        </div>
                        
                      </div>
                      <div class="change-avatar">
                        <div class="upload-img">
                            <div class="change-photo-btn">
                              <span><i class="fa fa-upload"></i> Upload File</span>
                              <input type="file" class="upload" (change)="onFileSelected($event)" />
                            </div>
                            <small class="form-text text-muted" style="margin-top: 15px;">Allowed DOC, DOCX, PDF,
                              JPG, PNG. Max
                              size of 5MB</small>
                          </div>
                      </div>
                    <div class="form-group" style="margin-top: 15px">
                        <div class="terms-accept">
                            <div class="custom-checkbox">
                                <input type="checkbox" id="terms_accept" required />
                                <label for="terms_accept">I have read and accept
                                    <a href="#">Terms & Conditions</a></label>
                            </div>
                        </div>
                    </div>
                </mat-dialog-content>

                <mat-dialog-actions>
                    <button type="button" class="btn btn-cancel" (click)="closeForm()">
                        Cancel
                    </button>
                    <button type="submit" class="btn btn-primary submit-btn" [disabled]="loading">
                        Edit
                    </button>

                    <div *ngIf="loading" class="spinner-container">
                        <p-progressSpinner styleClass="w-4rem h-4rem" strokeWidth="5" fill="var(--surface-ground)"
                            animationDuration=".5s">
                        </p-progressSpinner>
                    </div>
                </mat-dialog-actions>
            </form>

        </div>
    </div>
</div>